<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <select name="year" id="yeardiv" onchange="Test(value)">
      <option value="2006">2006</option>
      <option value="2007">2007</option>
      <option value="2008">2008</option>
      <option value="2009">2009</option>
      <option value="2010">2010</option>
      <option value="2011">2011</option>
      <option value="2012">2012</option>
      <option value="2013">2013</option>
      <option value="2014">2014</option>
      <option value="2015">2015</option>
      <option value="2016">2016</option>
      <option value="2017">2017</option>
      <option value="2018">2018</option>
      <option value="2019">2019</option>
      <option value="2020">2020</option>
      <option value="2021">2021</option>
    </select>
    <div id="chartdiv"></div>
</body>
<style>
    #chartdiv {
      width: 100%;
      height: 800px;
    }
    </style>
    
    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/flow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    
    <!-- Chart code -->
    <script>
      function Test(val) {
        render_data = raw_data;
        render_chart(render_data);
        
      };

      var raw_data = [
          { "from": "МШ банк", "to": "Хадгаламж банк", "value": 201000 },
          { "from": "Зоос банк", "to": "Төрийн банк", "value": 201000 },
          { "from": "Анод банк", "to": "Монгол банк", "value": 201000 },
          { "from": "УБХ банк", "to": "Юнайтед секьюритис", "value": 301071 },
          { "from": "Хадгаламж банк", "to": "Төрийн банк", "value": 201000 },
          { "from": "УБ ББСБ", "to": "УБХ банк", "value": 1107326 },
          { "from": "ХХ банк", "to": "МИК ОССК", "value": 1033395 },
          { "from": "УБХ банк", "to": "МИК ОССК", "value": 1033395 },
          { "from": "УБХ банк", "to": "МИК ОССК", "value": 1035000 },
          { "from": "УБХ банк", "to": "МИК ОССК", "value": 1035000 },
          { "from": "УБХ банк", "to": "Азиа дайверсифайд рийл эстэйт фанд нэг хувийн ХОС", "value": 1800075 },
          { "from": "Капитал банк", "to": "Азиа дайверсифайд рийл эстэйт фанд нэг хувийн ХОС", "value": 356110 },
          { "from": "Капитал банк", "to": "МИК АКТИВ 1 ТЗК", "value":892927 },
          { "from": "Капитал банк", "to": "МИК АКТИВ 2 ТЗК", "value":432712 },
          { "from": "Голомт банк", "to": "Нэксус финанс инвестмент", "value":130000 },
          { "from": "УБХ банк", "to": "Азиа дайверсифайд рийл эстэйт фанд нэг хувийн ХОС", "value": 437500 },
          { "from": "УБХ банк", "to": "Си И Си Групп", "value": 488750 },
          { "from": "УБХ банк", "to": "Си Эн Би Коансалтинг", "value": 539500 },
          { "from": "УБХ банк", "to": "ХХ банк", "value": 2070912 },
          { "from": "Монгол банк",  "to": "Ти Ди Би секьюритис ХХК", "value": 421241 },
          { "from": "Хувь",  "to": "Ти Ди Би секьюритис ХХК", "value": 644 },
          { "from": "Ти Ди Би секьюритис ХХК", "to": "Юнайтэд бэнкинг корпорэйшн", "value": 1232785 },
          { "from": "ХХ банк", "to": "Си Эн Би ХХК", "value": 2068980 },
        ]

      var render_data = [];
      
       am5.ready(function(render_data) {
        
        // Create root element
        // https://www.amcharts.com/docs/v5/getting-started/#Root_element
        var root = am5.Root.new("chartdiv");
        
        console.log("root", root._tooltip);
        
        // Set themes
        // https://www.amcharts.com/docs/v5/concepts/themes/
        root.setThemes([
          am5themes_Animated.new(root)
        ]);
        
        
        // Create series
        // https://www.amcharts.com/docs/v5/charts/flow-charts/
        var series = root.container.children.push(am5flow.ChordDirected.new(root, {
          startAngle: 80,
          padAngle: 1,
          linkHeadRadius: undefined,
          sourceIdField: "from",
          targetIdField: "to",
          valueField: "value"
        }));

        
        
        series.nodes.labels.template.setAll({
          textType: "radial",
          centerX: 0,
          fontSize: 9
        });
        
        series.links.template.set("fillStyle", "source");
        
        
        // Set data
        // https://www.amcharts.com/docs/v5/charts/flow-charts/#Setting_data

        series.data.setAll(raw_data);
        
        
        // Make stuff animate on load
        series.appear(1000, 100);
        
        }); // end am5.ready()
        </script>
     
</html>